<!DOCTYPE html>
<html lang="en">
  <head>
    <title>RxFireAuth  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
    <script src="js/lunr.min.js" defer></script>
    <script src="js/typeahead.jquery.js" defer></script>
    <script src="js/jazzy.search.js" defer></script>
  </head>
  <body>
    <a title="RxFireAuth  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html">RxFireAuth 2.1.0 Docs</a> (95% documented)</p>
        <p class="header-right">
          <form role="search" action="search.json">
            <input type="text" placeholder="Search documentation" data-typeahead>
          </form>
        </p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html">RxFireAuth Reference</a>
        <img id="carat" src="img/carat.png" />
        RxFireAuth  Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/SignInWithAppleHandler.html">SignInWithAppleHandler</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/UserManager.html">UserManager</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Enums.html">Enumerations</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Enums/UserError.html">UserError</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Protocols/LoginHandlerType.html">LoginHandlerType</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/LoginProviderManagerType.html">LoginProviderManagerType</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/UserManagerType.html">UserManagerType</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Structs.html">Structures</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/LoginCredentials.html">LoginCredentials</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/LoginCredentials/Provider.html">â€“ Provider</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/LoginDescriptor.html">LoginDescriptor</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/UserData.html">UserData</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Typealiases.html">Type Aliases</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Typealiases.html#/s:10RxFireAuth29GoogleSignInCompletionHandlera">GoogleSignInCompletionHandler</a>
              </li>
              <li class="nav-group-task">
                <a href="Typealiases.html#/s:10RxFireAuth32SignInWithAppleCompletionHandlera">SignInWithAppleCompletionHandler</a>
              </li>
              <li class="nav-group-task">
                <a href="Typealiases.html#/ViewController">ViewController</a>
              </li>
              <li class="nav-group-task">
                <a href="Typealiases.html#/s:10RxFireAuth14ViewControllera">ViewController</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
            <h1 id='rxfireauth' class='heading'>RxFireAuth</h1>

<p><a href="https://cocoapods.org/pods/RxFireAuth"><img src="https://img.shields.io/cocoapods/v/RxFireAuth.svg?style=flat" alt="Version"></a>
<a href="https://swift.org/package-manager">
  <img src="https://img.shields.io/badge/spm-compatible-brightgreen.svg?style=flat" alt="Swift Package Manager" />
</a>
<a href="https://cocoapods.org/pods/RxFireAuth"><img src="https://img.shields.io/cocoapods/l/RxFireAuth.svg?style=flat" alt="License"></a>
<a href="https://cocoapods.org/pods/RxFireAuth"><img src="https://img.shields.io/cocoapods/p/RxFireAuth.svg?style=flat" alt="Platform"></a></p>

<p>RxFireAuth is a wrapper around the <a href="https://firebase.google.com/docs/auth">Firebase Authentication</a> SDK that exposes most of the available functions through <a href="https://github.com/ReactiveX/RxSwift">RxSwift</a> objects. as well as improving the logic around managing and handling accounts throughout the lifecycle of your app.</p>

<p>Firebase Authentication is a great way to support user authentication in your app easily. This library builds on top of that to simplify even further the process with pre-built algorithms that support registering, logging-in, linking accounts with other providers, and more.</p>

<p>Looking for the Android version? You can find it <a href="https://github.com/MrAsterisco/RxFireAuth-Android">right here</a>.</p>
<h2 id='installation' class='heading'>Installation</h2>

<p>RxFireAuth is available through <a href="https://cocoapods.org">CocoaPods</a> and <a href="https://swift.org/package-manager">Swift Package Manager</a> <em>(in Beta)</em>.</p>

<p><em>If you are including this library in a project that needs to build for Apple Silicon, you must use Swift Package Manager, as CocoaPods seems not fully compatible yet.</em></p>
<h3 id='cocoapods' class='heading'>CocoaPods</h3>

<p>To install RxFireAuth in your project add:</p>
<pre class="highlight ruby"><code><span class="n">pod</span> <span class="s1">'RxFireAuth'</span>
</code></pre>
<h3 id='swift-package-manager' class='heading'>Swift Package Manager</h3>

<p>To install RxFireAuth in your project, add this repository as dependency using Xcode or add the following in your <code>Package.swift</code> file:</p>
<pre class="highlight swift"><code><span class="o">.</span><span class="nf">package</span><span class="p">(</span><span class="nv">url</span><span class="p">:</span> <span class="s">"https://github.com/MrAsterisco/RxFireAuth"</span><span class="p">,</span> <span class="nv">branch</span><span class="p">:</span> <span class="s">"develop"</span><span class="p">)</span>
</code></pre>

<p><em>Please note that Swift Package Manager support relies on the Firebase SDK Swift Package Manager beta branch, which is not yet officially supported by the Firebase team. You can find more information <a href="https://github.com/firebase/firebase-ios-sdk/blob/master/SwiftPackageManager.md">here</a>.</em></p>

<p><em>The Google SignIn SDK is not available through Swift Package Manager and it is automatically replaced by a standard implementation of <a href="https://appauth.io/">AppAuth</a>.</em></p>
<h3 id='latest-release' class='heading'>Latest Release</h3>

<p>To find out the latest version, look at the Releases tab of this repository.</p>
<h2 id='get-started' class='heading'>Get Started</h2>

<p>To get started with RxFireAuth, you can download the example project or dive right into the <a href="https://mrasterisco.github.io/RxFireAuth/">documentation</a>.</p>
<h3 id='example-project' class='heading'>Example Project</h3>

<p>This library includes a sample project that shows how to implement all the functions of the library on both iOS and macOS.</p>

<p>To see it in action, follow these steps:</p>

<ul>
<li>Download this repository.</li>
<li>Navigate to your <a href="https://console.firebase.google.com/">Firebase Console</a> and create a new project (it&rsquo;s free!).</li>
<li>Add two iOS apps with the following bundle identifiers: <code>io.mrasterisco.github.RxFireAuth-Example</code> and <code>io.mrasterisco.github.RxFireAuth-Example-macOS</code>. If you are not interested in both platforms, you can also add just one of the two.</li>
<li>Download the <code>GoogleService-Info.plist</code> per each platform and place the first one <em>(iOS)</em> under  <code>Example/RxFireAuth</code> and the second one <em>(macOS)</em> under <code>Example\RxFireAuth macOS</code>.</li>
<li>In the Firebase Console, navigate to the Authentication tab and enable &ldquo;Email/Password&rdquo;, &ldquo;Anonymous&rdquo;, &ldquo;Apple&rdquo; and &ldquo;Google&rdquo;.</li>
</ul>
<h4 id='test-with-cocoapods' class='heading'>Test with CocoaPods</h4>

<ul>
<li>Navigate to the <code>Example</code> folder and run <code>pod install</code>.</li>
<li>Open <code>RxFireAuth.xcworkspace</code>, select a valid Signing Identity, build and run.</li>
</ul>
<h4 id='test-with-swift-package-manager' class='heading'>Test with Swift Package Manager</h4>

<ul>
<li>Open <code>RxFireAuth.xcodeproj</code> under the <code>Example-SwiftPM</code> folder.</li>
</ul>

<p><em>**Note</em><em>: the Firebase Console does not support macOS apps, so you&rsquo;ll have to add the macOS version as an iOS app. Please also note that the Firebase SDK for macOS is not officially part of the Firebase product, but it is community supported. You can find further info <a href="https://github.com/firebase/firebase-ios-sdk/blob/master/README.md">here</a>.</em></p>

<p><em>**Note 2</em><em>: to test Sign in with Apple, you need a valid signing identity. If you don&rsquo;t have one now, you can turn off Sign in with Apple under the &ldquo;Signing &amp; Capabilities&rdquo; tab of the Xcode project.</em></p>
<h3 id='references' class='heading'>References</h3>

<p>The whole library is built around the <code><a href="Protocols/UserManagerType.html">UserManagerType</a></code> protocol. The library provides the default implementation of it through the <code><a href="Classes/UserManager.html">UserManager</a></code> class, that you can instantiate directly or get through Dependency Injection.</p>
<h3 id='configuration' class='heading'>Configuration</h3>

<p>RxFireAuth assumes that you have already gone through the <a href="https://firebase.google.com/docs/auth/ios/start">Get Started</a> guide on the Firebase Authentication documentation website. This means that:</p>

<ul>
<li>You have already <a href="https://firebase.google.com/docs/ios/setup#create-firebase-project">created a new project</a> in the <a href="https://console.firebase.google.com/">Firebase Console</a>.</li>
<li>You have <a href="https://firebase.google.com/docs/ios/setup#register-app">registered your app&rsquo;s bundle identifier</a> and
<a href="https://firebase.google.com/docs/ios/setup#add-config-file">added the <code>GoogleService-Info.plist</code> file</a>.</li>
<li>You have already configured the Firebase SDK at the app startup:
&ndash; iOS: you have already called <code>FirebaseApp.configure()</code> in your <code>application:didFinishLaunchingWithOptions:</code> function in the AppDelegate, <a href="https://firebase.google.com/docs/ios/setup#initialize-firebase">as described here</a>.
&ndash; macOS: you have already called <code>FirebaseApp.configure()</code> in your <code>awakeFromNib</code> function in the AppDelegate.</li>
<li>You have already turned on and configured the authentication providers that you&rsquo;d like to use in the Firebase Console.</li>
</ul>

<p><em>In your Podfile, you can omit the <code>Firebase/Auth</code> reference as it is already a dependency of this library and will be included automatically.</em></p>
<h4 id='oauth-providers' class='heading'>OAuth Providers</h4>

<p>To support OAuth providers such as Google SignIn, you also have to add the following to your <code>AppDelegate</code>:</p>
<pre class="highlight swift"><code><span class="kd">func</span> <span class="nf">application</span><span class="p">(</span><span class="n">_</span> <span class="nv">app</span><span class="p">:</span> <span class="kt">UIApplication</span><span class="p">,</span> <span class="kd">open</span> <span class="nv">url</span><span class="p">:</span> <span class="kt">URL</span><span class="p">,</span> <span class="nv">options</span><span class="p">:</span> <span class="p">[</span><span class="kt">UIApplication</span><span class="o">.</span><span class="kt">OpenURLOptionsKey</span> <span class="p">:</span> <span class="kt">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">[:])</span> <span class="o">-&gt;</span> <span class="kt">Bool</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">self</span><span class="o">.</span><span class="n">userManager</span><span class="o">.</span><span class="n">loginHandler</span><span class="p">?</span><span class="o">.</span><span class="nf">handle</span><span class="p">(</span><span class="nv">url</span><span class="p">:</span> <span class="n">url</span><span class="p">)</span> <span class="p">??</span> <span class="kc">false</span>
<span class="p">}</span>
</code></pre>

<p>Or, if you&rsquo;re using the library on macOS, add the following to your <code>AppDelegate</code>:</p>
<pre class="highlight swift"><code><span class="kd">func</span> <span class="nf">applicationDidFinishLaunching</span><span class="p">(</span><span class="n">_</span> <span class="nv">notification</span><span class="p">:</span> <span class="kt">Notification</span><span class="p">)</span> <span class="p">{</span>
  <span class="kt">NSAppleEventManager</span><span class="o">.</span><span class="nf">shared</span><span class="p">()</span><span class="o">.</span><span class="nf">setEventHandler</span><span class="p">(</span><span class="k">self</span><span class="p">,</span> <span class="nv">andSelector</span><span class="p">:</span> <span class="kd">#selector(</span><span class="nf">AppDelegate.handleGetURLEvent(event:replyEvent:)</span><span class="kd">)</span><span class="p">,</span> <span class="nv">forEventClass</span><span class="p">:</span> <span class="kt">AEEventClass</span><span class="p">(</span><span class="n">kInternetEventClass</span><span class="p">),</span> <span class="nv">andEventID</span><span class="p">:</span> <span class="kt">AEEventID</span><span class="p">(</span><span class="n">kAEGetURL</span><span class="p">))</span>
<span class="p">}</span>

<span class="kd">@objc</span> <span class="kd">func</span> <span class="nf">handleGetURLEvent</span><span class="p">(</span><span class="nv">event</span><span class="p">:</span> <span class="kt">NSAppleEventDescriptor</span><span class="p">,</span> <span class="nv">replyEvent</span><span class="p">:</span> <span class="kt">NSAppleEventDescriptor</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">let</span> <span class="nv">urlString</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="nf">paramDescriptor</span><span class="p">(</span><span class="nv">forKeyword</span><span class="p">:</span> <span class="kt">AEKeyword</span><span class="p">(</span><span class="n">keyDirectObject</span><span class="p">))?</span><span class="o">.</span><span class="n">stringValue</span><span class="o">!</span>
  <span class="k">let</span> <span class="nv">url</span> <span class="o">=</span> <span class="kt">URL</span><span class="p">(</span><span class="nv">string</span><span class="p">:</span> <span class="n">urlString</span><span class="o">!</span><span class="p">)</span><span class="o">!</span>
  <span class="n">_</span> <span class="o">=</span> <span class="n">userManager</span><span class="o">.</span><span class="n">loginHandler</span><span class="p">?</span><span class="o">.</span><span class="nf">handle</span><span class="p">(</span><span class="nv">url</span><span class="p">:</span> <span class="n">url</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>

<p>You also have to register the redirect URL for your app in the <code>Info.plist</code>:</p>
<pre class="highlight xml"><code><span class="nt">&lt;key&gt;</span>CFBundleURLTypes<span class="nt">&lt;/key&gt;</span>
<span class="nt">&lt;array&gt;</span>
  <span class="nt">&lt;dict&gt;</span>
    <span class="nt">&lt;key&gt;</span>CFBundleTypeRole<span class="nt">&lt;/key&gt;</span>
    <span class="nt">&lt;string&gt;</span>Editor<span class="nt">&lt;/string&gt;</span>
    <span class="nt">&lt;key&gt;</span>CFBundleURLSchemes<span class="nt">&lt;/key&gt;</span>
    <span class="nt">&lt;array&gt;</span>
      <span class="nt">&lt;string&gt;</span>{{FIREBASE_REVERSED_CLIENT_ID}}<span class="nt">&lt;/string&gt;</span>
    <span class="nt">&lt;/array&gt;</span>
  <span class="nt">&lt;/dict&gt;</span>
<span class="nt">&lt;/array&gt;</span>
</code></pre>

<p>You can find your <code>FIREBASE_REVERSED_CLIENT_ID</code> in the <code>GoogleService-Info.plist</code> file.</p>
<h2 id='features' class='heading'>Features</h2>

<p>RxFireAuth offers several ways to interact with Firebase Authentication in a simple and reactive way.</p>
<h2 id='login' class='heading'>Login</h2>

<p>One of the things that RxFireAuth aims to simplify is the ability to build a Register/Login screen that works seamlessly for new and returning users, also considering the ability of Firebase to create <a href="https://firebase.google.com/docs/auth/ios/anonymous-auth">anonymous accounts</a>.</p>
<h4 id='anonymous-accounts-flow' class='heading'>Anonymous Accounts Flow</h4>

<p>Modern applications should always try to delay sign-in as long as possible. From Apple Human Interface Guidelines:</p>

<blockquote>
<p>Delay sign-in as long as possible. People often abandon apps when they&rsquo;re forced to sign in before doing anything useful. Give them a chance to familiarize themselves with your app before committing. For example, a live-streaming app could let people explore available content before signing in to stream something.</p>
</blockquote>

<p>Anonymous Accounts are Firebase&rsquo;s way to support this situation: when you first launch the app, you create an anonymous account that can then be converted to a new account when the user is ready to sign-in. This works flawlessly for new accounts but has a few catches when dealing with returning users.</p>

<p>Consider the following situation:</p>

<ul>
<li>Mike is a new user of your app. Since you&rsquo;ve strictly followed Apple&rsquo;s guidelines when Mike opens your app, he&rsquo;s taken directly to the main screen.</li>
<li>All the data that Mike builds in your app is linked to an anonymous account that you have created automatically while starting the app for the first time.</li>
<li>At some point, Mike decides to sign-in to sync his data with another device. He registers a new account with his email and a password.</li>
<li>Everything&rsquo;s looking good until now with the normal Firebase SDK, <strong>unless you&rsquo;re super into RxSwift and you want all the Firebase methods to be wrapped into Rx components; if that&rsquo;s the case, skip the next points and go directly to &ldquo;Code Showcase&rdquo; paragraph.</strong></li>
<li>Now, Mike wants to use his shiny new account to sign-in into another device. He downloads the app once again and he finds himself on the Home screen.</li>
<li>He goes directly into the Sign-in screen and enters his account credentials: at this point, using the Firebase SDK, you&rsquo;ll try to link the anonymous account that has been created while opening the app to Mike&rsquo;s credential, but you&rsquo;ll get an error saying that those credentials are already in use. <strong>Here&rsquo;s where this library will help you: when logging-in, the <code><a href="Classes/UserManager.html">UserManager</a></code> class will automatically check if the specified credentials already exist and will use those to login; it&rsquo;ll also delete the anonymous account that is no longer needed and report everything back to you.</strong></li>
</ul>
<h5 id='code-showcase' class='heading'>Code Showcase</h5>

<p>Use the following method to login using an email and a password:</p>
<pre class="highlight swift"><code><span class="kd">func</span> <span class="nf">login</span><span class="p">(</span><span class="nv">email</span><span class="p">:</span> <span class="kt">String</span><span class="p">,</span> <span class="nv">password</span><span class="p">:</span> <span class="kt">String</span><span class="p">,</span> <span class="nv">allowMigration</span><span class="p">:</span> <span class="kt">Bool</span><span class="p">?)</span> <span class="o">-&gt;</span> <span class="kt">Single</span><span class="o">&lt;</span><span class="kt">LoginDescriptor</span><span class="o">&gt;</span>
</code></pre>

<p>The <code>allowMigration</code> parameter is useful in the situation that we&rsquo;ve just described: there is an anonymous account that has to be deleted and replaced with an existing account. When set to <code>nil</code>, the library will return a <code>Single</code> that emits the <code>UserError.migrationRequired</code> error to give your app the chance to ask the user what they&rsquo;d like to do with the data they have in the anonymous account.</p>

<p><img src="https://i.imgur.com/XRPhSUg.jpg" alt="Account Migration Alert"></p>

<p>When the user has made a choice, pass either <code>true</code> or <code>false</code> to get the same value circled back to your code after the sign in procedure completed successfully.</p>

<p>To support the migration, all sign in methods return an instance of <code><a href="Structs/LoginDescriptor.html">LoginDescriptor</a></code> which gives you the <code>allowMigration</code> parameter that you&rsquo;ve passed, the User ID of the anonymous account, and the User ID of the account that is now logged-in. With this information, you can go ahead and migrate the data from the anonymous account to the newly logged-in account.</p>
<h4 id='sign-in-with-authentication-providers' class='heading'>Sign-in with Authentication Providers</h4>

<p>If you are thinking of providing alternative ways to login into your app, RxFireAuth&rsquo;s got you covered.</p>

<p>When signing in with an external provider, it is always good to just let the user sign in and then figure out later if this is their first time or not. Additionally, it is common practice to let people connect different providers along with their email and password credentials. <em>Giving people flexibility is always a good choice.</em></p>

<p>Let&rsquo;s use the same short story from before, but Mike is now going to use Sign in with Apple.</p>

<ul>
<li>On the first device, nothing changes: with the standard Firebase SDK, we can link the anonymous account with Mike&rsquo;s Apple ID.</li>
<li>On the second device, two things will happen: first of all, Apple has a different flow for apps that have already used Sign-in with Apple; and this is not controllable by you, so if the user registers and then deletes their account in your app, they&rsquo;ll still get a different sign-in flow in the case they return to the app and Sign-in with Apple once again (further on this <a href="https://forums.developer.apple.com/thread/119826">here</a>). Secondly, you&rsquo;ll have to handle various situations.</li>
</ul>

<p>When using Sign-in with Apple <em>(or any other provider, such as Google)</em>, you&rsquo;ll find yourself in one of these cases:</p>

<ol>
<li>There is an anonymous user logged-in and the Apple ID is not linked with any existing account: that&rsquo;s fantastic! We&rsquo;ll just link the Apple ID with the anonymous user and we&rsquo;re done.</li>
<li>There is an anonymous user logged-in, but the Apple ID is already linked with another account: we&rsquo;ll have to go through the migration and then sign in to the existing account.</li>
<li>There is a normal user logged-in and the Apple ID is not linked with any other account: the user is trying to link their Apple ID with an existing account, let&rsquo;s go ahead and do that.</li>
<li>There is a normal user logged-in, but the Apple ID is already linked with another account: we&rsquo;ll throw an error because the user must choose what to do.</li>
<li>There is nobody logged-in and the Apple ID is either already linked or not: we&rsquo;ll sign into the existing or new account.</li>
</ol>

<p>With RxFireAuth&rsquo;s <code>login</code> method family, all of these cases are handled <em>automagically</em> for you.</p>
<h5 id='code-showcase' class='heading'>Code Showcase</h5>

<p><strong>All of the possible cases</strong> are handled automatically for you by calling:</p>
<pre class="highlight swift"><code><span class="kd">func</span> <span class="nf">signInWithApple</span><span class="p">(</span><span class="k">in</span> <span class="nv">viewController</span><span class="p">:</span> <span class="kt">UIViewController</span><span class="p">,</span> <span class="nv">updateUserDisplayName</span><span class="p">:</span> <span class="kt">Bool</span><span class="p">,</span> <span class="nv">allowMigration</span><span class="p">:</span> <span class="kt">Bool</span><span class="p">?)</span> <span class="o">-&gt;</span> <span class="kt">Single</span><span class="o">&lt;</span><span class="kt">LoginDescriptor</span><span class="o">&gt;</span>
</code></pre>

<p>or</p>
<pre class="highlight swift"><code><span class="kd">func</span> <span class="nf">signInWithGoogle</span><span class="p">(</span><span class="k">as</span> <span class="nv">clientId</span><span class="p">:</span> <span class="kt">String</span><span class="p">,</span> <span class="k">in</span> <span class="nv">viewController</span><span class="p">:</span> <span class="kt">UIViewController</span><span class="p">,</span> <span class="nv">updateUserDisplayName</span><span class="p">:</span> <span class="kt">Bool</span><span class="p">,</span> <span class="nv">allowMigration</span><span class="p">:</span> <span class="kt">Bool</span><span class="p">?)</span> <span class="o">-&gt;</span> <span class="kt">Single</span><span class="o">&lt;</span><span class="kt">LoginDescriptor</span><span class="o">&gt;</span>
</code></pre>

<p><em>These functions are available in implementations of <code><a href="Protocols/LoginProviderManagerType.html">LoginProviderManagerType</a></code>, such as the <code><a href="Classes/UserManager.html">UserManager</a></code> class that we&rsquo;re already using.</em></p>

<p>You can use the <code>updateUserDisplayName</code> parameter to automatically set the Firebase User <code>displayName</code> property to the full name associated with the provider account. <em>Keep in mind that some providers, such as Apple, allow the user to change this information while signing in for the first time and may return it for new users only that have never signed into your app before.</em></p>

<p>This function will behave as the normal sign in, returning <code>UserError.migrationRequired</code>, if an anonymous account will have to be deleted and <code>allowMigration</code> is not set. When this happens, you can use the following function to continue signing in after having asked the user what they&rsquo;d like to do:</p>
<pre class="highlight swift"><code><span class="kd">func</span> <span class="nf">login</span><span class="p">(</span><span class="n">with</span> <span class="nv">credentials</span><span class="p">:</span> <span class="kt">LoginCredentials</span><span class="p">,</span> <span class="nv">updateUserDisplayName</span><span class="p">:</span> <span class="kt">Bool</span><span class="p">,</span> <span class="nv">allowMigration</span><span class="p">:</span> <span class="kt">Bool</span><span class="p">?)</span> <span class="o">-&gt;</span> <span class="kt">Single</span><span class="o">&lt;</span><span class="kt">LoginDescriptor</span><span class="o">&gt;</span>
</code></pre>

<p>The login credentials are embedded in the <code>migrationRequired</code> error and, except for particular cases, you shouldn&rsquo;t need to inspect them.</p>
<h2 id='user-data' class='heading'>User Data</h2>

<p>You can get the profile of the currently logged-in user by calling:</p>
<pre class="highlight swift"><code><span class="k">self</span><span class="o">.</span><span class="n">userManager</span><span class="o">.</span><span class="n">user</span>
</code></pre>

<p>or by subscribing to:</p>
<pre class="highlight swift"><code><span class="k">self</span><span class="o">.</span><span class="n">userManager</span><span class="o">.</span><span class="n">autoupdatingUser</span>
</code></pre>

<p><em>This Observable will emit new values every time something on the user profile has changed.</em></p>

<p>Once signed in, you can inspect the authentication providers of the user by cycling through the <code>authenticationProviders</code> array of the <code><a href="Structs/UserData.html">UserData</a></code> instance. For a list of the supported providers, see the <code>Provider</code> enum, in <code><a href="Structs/LoginCredentials.html">LoginCredentials</a></code>.</p>
<h2 id='authentication-confirmation' class='heading'>Authentication Confirmation</h2>

<p>When performing sensitive actions, such as changing the user password, linking new authentication providers or deleting the user account, Firebase will require you to get a new refresh token by forcing the user to login again. RxFireAuth offers convenient methods to confirm the authentication using one the supported providers.</p>

<p>You can confirm the authentication using email and password:</p>
<pre class="highlight swift"><code><span class="kd">func</span> <span class="nf">confirmAuthentication</span><span class="p">(</span><span class="nv">email</span><span class="p">:</span> <span class="kt">String</span><span class="p">,</span> <span class="nv">password</span><span class="p">:</span> <span class="kt">String</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Completable</span>
</code></pre>

<p>Sign in with Apple:</p>
<pre class="highlight swift"><code><span class="kd">func</span> <span class="nf">confirmAuthenticationWithApple</span><span class="p">(</span><span class="k">in</span> <span class="nv">viewController</span><span class="p">:</span> <span class="kt">UIViewController</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Completable</span>
</code></pre>

<p>or Google Sign In:</p>
<pre class="highlight swift"><code><span class="kd">func</span> <span class="nf">confirmAuthenticationWithGoogle</span><span class="p">(</span><span class="k">as</span> <span class="nv">clientId</span><span class="p">:</span> <span class="kt">String</span><span class="p">,</span> <span class="k">in</span> <span class="nv">viewController</span><span class="p">:</span> <span class="kt">UIViewController</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Completable</span>
</code></pre>
<h2 id='documentation' class='heading'>Documentation</h2>

<p><strong>Always refer to the <code><a href="Protocols/UserManagerType.html">UserManagerType</a></code> and <code><a href="Protocols/LoginProviderManagerType.html">LoginProviderManagerType</a></code> protocols</strong> in your code, because the <code><a href="Classes/UserManager.html">UserManager</a></code> implementation may introduce breaking changes over time even if the library major version hasn&rsquo;t changed.</p>

<p>These protocols are fully documented, as all of the involved structs and helper classes.</p>

<p>You can find the <a href="https://mrasterisco.github.io/RxFireAuth/">autogenerated documentation here</a>.</p>
<h2 id='compatibility' class='heading'>Compatibility</h2>

<p>RxFireAuth targets <strong>iOS 10.0 or later</strong> and <strong>macOS 10.12 or later</strong> and has the following shared dependencies:</p>

<ul>
<li><code>Firebase/Auth</code> version 7.1.</li>
<li><code>JWTDecode</code> version 2.5.</li>
<li><code>RxCocoa</code> version 5.</li>
</ul>

<p>On iOS, <em>when included via CocoaPods</em>, it also needs:</p>

<ul>
<li><code>GoogleSignIn</code> version 5.0.2.</li>
</ul>

<p>On macOS and when included via Swift Package Manager, <code>GoogleSignIn</code> is replaced by:</p>

<ul>
<li><code>AppAuth</code> version 1.4.</li>
</ul>
<h2 id='contributions' class='heading'>Contributions</h2>

<p>All contributions to expand the library are welcome. Fork the repo, make the changes you want, and open a Pull Request.</p>

<p>If you make changes to the codebase, I am not enforcing a coding style, but I may ask you to make changes based on how the rest of the library is made.</p>
<h2 id='status' class='heading'>Status</h2>

<p>This library is under <strong>active development</strong> and it can be considered stable enough to be used in Production. </p>

<p>Even if most of the APIs are pretty straightforward, <strong>they may change in the future</strong>; but you don&rsquo;t have to worry about that, because releases will follow <a href="https://semver.org">Semanting Versioning 2.0.0</a>.</p>
<h2 id='license' class='heading'>License</h2>

<p>RxFireAuth is distributed under the MIT license. <a href="https://github.com/MrAsterisco/RxFireAuth/blob/master/LICENSE">See LICENSE</a> for details.</p>

          </section>
        </section>
        <section id="footer">
          <p>&copy; 2021 <a class="link" href="https://github.com/mrasterisco/RxFireAuth" target="_blank" rel="external">Alessio Moiso</a>. All rights reserved. (Last updated: 2021-02-07)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy â™ªâ™« v0.13.6</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
